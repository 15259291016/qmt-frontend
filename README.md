# QMTå‰ç«¯ç®¡ç†ç³»ç»Ÿ

åŸºäº Vue 3 + TypeScript + Vite + Pinia æ„å»ºçš„ç°ä»£åŒ–å‰ç«¯ç®¡ç†ç³»ç»Ÿã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ” ç”¨æˆ·è®¤è¯ï¼ˆç™»å½•/æ³¨å†Œï¼‰
- ğŸ‘¤ ç”¨æˆ·ç®¡ç†
- ğŸ”‘ æƒé™ç®¡ç†
- ğŸ’³ è®¢é˜…ç®¡ç†
- ğŸ¨ ç°ä»£åŒ–UIè®¾è®¡
- ğŸ“± å“åº”å¼å¸ƒå±€ï¼ˆæ”¯æŒæ‰‹æœºç«¯ï¼‰
- ğŸ”’ è·¯ç”±å®ˆå«
- ğŸš€ å¿«é€Ÿå¼€å‘
- ğŸ“± æ‰‹æœºç«¯å®Œç¾é€‚é…

## æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Vue 3
- **è¯­è¨€**: TypeScript
- **æ„å»ºå·¥å…·**: Vite
- **çŠ¶æ€ç®¡ç†**: Pinia
- **è·¯ç”±**: Vue Router 4
- **HTTPå®¢æˆ·ç«¯**: Axios
- **æ ·å¼**: CSS3

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 18.0.0
- npm >= 8.0.0

### å®‰è£…ä¾èµ–

```bash
npm install
```

### å¼€å‘ç¯å¢ƒ

```bash
npm run dev
```

è®¿é—® http://localhost:5173

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

### é¢„è§ˆç”Ÿäº§ç‰ˆæœ¬

```bash
npm run preview
```

## é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ api/                 # APIæœåŠ¡
â”‚   â”œâ”€â”€ auth.ts         # è®¤è¯ç›¸å…³API
â”‚   â”œâ”€â”€ user.ts         # ç”¨æˆ·ç›¸å…³API
â”‚   â”œâ”€â”€ permission.ts   # æƒé™ç›¸å…³API
â”‚   â””â”€â”€ business.ts     # ä¸šåŠ¡ç›¸å…³API
â”œâ”€â”€ components/         # å…¬å…±ç»„ä»¶
â”œâ”€â”€ config/            # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ api.ts         # APIé…ç½®
â”œâ”€â”€ router/            # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ index.ts       # è·¯ç”±å®šä¹‰
â”œâ”€â”€ stores/            # çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ auth.ts        # è®¤è¯çŠ¶æ€
â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ http.ts        # HTTPå®¢æˆ·ç«¯
â”œâ”€â”€ views/             # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ LoginView.vue      # ç™»å½•é¡µ
â”‚   â”œâ”€â”€ RegisterView.vue   # æ³¨å†Œé¡µ
â”‚   â”œâ”€â”€ HomeView.vue       # é¦–é¡µ
â”‚   â”œâ”€â”€ ProfileView.vue    # ä¸ªäººä¸­å¿ƒ
â”‚   â”œâ”€â”€ SubscribeView.vue  # è®¢é˜…é¡µé¢
â”‚   â”œâ”€â”€ AdminView.vue      # ç®¡ç†å‘˜é¡µé¢
â”‚   â”œâ”€â”€ PermissionsView.vue # æƒé™ç®¡ç†
â”‚   â”œâ”€â”€ ForbiddenView.vue  # 403é¡µé¢
â”‚   â””â”€â”€ NotFoundView.vue   # 404é¡µé¢
â”œâ”€â”€ App.vue            # æ ¹ç»„ä»¶
â””â”€â”€ main.ts            # å…¥å£æ–‡ä»¶
```

## ç¯å¢ƒå˜é‡

### å¼€å‘ç¯å¢ƒ (.env.development)

```
VITE_API_BASE_URL=http://localhost:8888
VITE_APP_TITLE=QMTå‰ç«¯ç®¡ç†ç³»ç»Ÿ
```

### ç”Ÿäº§ç¯å¢ƒ (.env.production)

```
VITE_API_BASE_URL=https://your-api-domain.com
VITE_APP_TITLE=QMTå‰ç«¯ç®¡ç†ç³»ç»Ÿ
```

## APIæ¥å£

### è®¤è¯ç›¸å…³

- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/logout` - ç”¨æˆ·ç™»å‡º
- `GET /api/auth/profile` - è·å–ç”¨æˆ·ä¿¡æ¯
- `POST /api/auth/refresh` - åˆ·æ–°token

### ç”¨æˆ·ç›¸å…³

- `POST /api/user/subscribe` - è®¢é˜…æ¿€æ´»/ç»­è´¹

### æƒé™ç›¸å…³

- `GET /api/roles` - è·å–è§’è‰²åˆ—è¡¨
- `GET /api/permissions` - è·å–æƒé™åˆ—è¡¨
- `GET /api/users/{id}/roles` - è·å–ç”¨æˆ·è§’è‰²
- `GET /api/users/{id}/permissions` - è·å–ç”¨æˆ·æƒé™

### ä¸šåŠ¡ç›¸å…³

- `GET /api/data` - è·å–æ•°æ®
- `GET /api/system` - è·å–ç³»ç»Ÿä¿¡æ¯
- `GET /api/users` - è·å–ç”¨æˆ·åˆ—è¡¨
- `GET /api/admin` - ç®¡ç†å‘˜ä¿¡æ¯
- `GET /api/mixed-permissions` - æ··åˆæƒé™ä¿¡æ¯

## è·¯ç”±è¯´æ˜

| è·¯å¾„ | åç§° | æè¿° | éœ€è¦è®¤è¯ |
|------|------|------|----------|
| `/login` | ç™»å½• | ç”¨æˆ·ç™»å½•é¡µé¢ | å¦ |
| `/register` | æ³¨å†Œ | ç”¨æˆ·æ³¨å†Œé¡µé¢ | å¦ |
| `/` | é¦–é¡µ | ç³»ç»Ÿé¦–é¡µ | æ˜¯ |
| `/profile` | ä¸ªäººä¸­å¿ƒ | ç”¨æˆ·ä¿¡æ¯ç®¡ç† | æ˜¯ |
| `/subscribe` | è®¢é˜… | è®¢é˜…ç®¡ç†é¡µé¢ | æ˜¯ |
| `/admin` | ç®¡ç†å‘˜ | ç®¡ç†å‘˜é¢æ¿ | æ˜¯ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰ |
| `/permissions` | æƒé™ç®¡ç† | æƒé™æŸ¥çœ‹é¡µé¢ | æ˜¯ |
| `/403` | ç¦æ­¢è®¿é—® | æƒé™ä¸è¶³é¡µé¢ | å¦ |
| `/*` | 404 | é¡µé¢æœªæ‰¾åˆ° | å¦ |

## çŠ¶æ€ç®¡ç†

ä½¿ç”¨ Pinia è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼Œä¸»è¦åŒ…å«ï¼š

### è®¤è¯çŠ¶æ€ (auth)

- `user` - ç”¨æˆ·ä¿¡æ¯
- `permissions` - ç”¨æˆ·æƒé™
- `roles` - ç”¨æˆ·è§’è‰²
- `subscription` - è®¢é˜…ä¿¡æ¯
- `loading` - åŠ è½½çŠ¶æ€

### è®¡ç®—å±æ€§

- `isLoggedIn` - æ˜¯å¦å·²ç™»å½•
- `hasPermission` - æ£€æŸ¥æƒé™
- `hasRole` - æ£€æŸ¥è§’è‰²
- `isSubscriptionValid` - è®¢é˜…æ˜¯å¦æœ‰æ•ˆ

## æƒé™æ§åˆ¶

### è·¯ç”±å®ˆå«

- è‡ªåŠ¨æ£€æŸ¥ç”¨æˆ·è®¤è¯çŠ¶æ€
- éªŒè¯ç”¨æˆ·æƒé™å’Œè§’è‰²
- æ£€æŸ¥è®¢é˜…æœ‰æ•ˆæ€§
- è‡ªåŠ¨è·³è½¬åˆ°ç›¸åº”é¡µé¢

### æƒé™æ£€æŸ¥

```typescript
// æ£€æŸ¥æƒé™
if (authStore.hasPermission('user:read')) {
  // æœ‰æƒé™æ‰§è¡Œæ“ä½œ
}

// æ£€æŸ¥è§’è‰²
if (authStore.hasRole('admin')) {
  // ç®¡ç†å‘˜æ“ä½œ
}
```

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°é¡µé¢

1. åœ¨ `src/views/` åˆ›å»ºæ–°çš„ Vue ç»„ä»¶
2. åœ¨ `src/router/index.ts` æ·»åŠ è·¯ç”±é…ç½®
3. æ ¹æ®éœ€è¦æ·»åŠ æƒé™æ§åˆ¶

### æ·»åŠ æ–°API

1. åœ¨ `src/api/` åˆ›å»ºæ–°çš„APIæœåŠ¡æ–‡ä»¶
2. åœ¨ `src/config/api.ts` æ·»åŠ APIç«¯ç‚¹é…ç½®
3. åœ¨çŠ¶æ€ç®¡ç†ä¸­æ·»åŠ ç›¸åº”çš„çŠ¶æ€å’Œæ–¹æ³•

### æ ·å¼è§„èŒƒ

- ä½¿ç”¨ CSS3 å’Œ Flexbox/Grid å¸ƒå±€
- éµå¾ªå“åº”å¼è®¾è®¡åŸåˆ™
- ä¿æŒä¸€è‡´çš„è§†è§‰é£æ ¼

## ğŸ“± æ‰‹æœºç«¯é€‚é…

### å“åº”å¼æ–­ç‚¹
- **æ¡Œé¢ç«¯**: 1200px+
- **å¹³æ¿ç«¯**: 768px - 1199px
- **æ‰‹æœºç«¯**: < 768px
- **å°å±æ‰‹æœº**: < 480px

### é€‚é…ç‰¹æ€§
- âœ… è§¦æ‘¸å‹å¥½çš„äº¤äº’è®¾è®¡
- âœ… å¤§å°ºå¯¸è¾“å…¥æ¡†ï¼ˆé˜²æ­¢iOSç¼©æ”¾ï¼‰
- âœ… å“åº”å¼å¯¼èˆªèœå•
- âœ… ä¼˜åŒ–çš„å­—ä½“å’Œé—´è·
- âœ… å…¨å±è¡¨å•å¸ƒå±€
- âœ… å¡ç‰‡å¼ä¿¡æ¯å±•ç¤º

### è®¾å¤‡å…¼å®¹æ€§
- âœ… iPhone (iOS 12+)
- âœ… Android (Android 8+)
- âœ… iPad (iOS 12+)
- âœ… Androidå¹³æ¿
- âœ… å„ç§å°ºå¯¸çš„æ‰‹æœº

### æµè§ˆå™¨æ”¯æŒ
- âœ… Safari (iOS)
- âœ… Chrome (Android)
- âœ… Firefox Mobile
- âœ… Edge Mobile

## éƒ¨ç½²è¯´æ˜

### æ„å»º

```bash
npm run build
```

### éƒ¨ç½²åˆ°æœåŠ¡å™¨

å°† `dist/` ç›®å½•ä¸‹çš„æ–‡ä»¶éƒ¨ç½²åˆ° Web æœåŠ¡å™¨ã€‚

### Nginx é…ç½®ç¤ºä¾‹

```nginx
server {
    listen 80;
    server_name your-domain.com;
    root /path/to/dist;
    index index.html;
    
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    location /api {
        proxy_pass http://localhost:8888;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

## å¸¸è§é—®é¢˜

### 1. è·¨åŸŸé—®é¢˜

ç¡®ä¿åç«¯å·²æ­£ç¡®é…ç½® CORSï¼Œå…è®¸å‰ç«¯åŸŸåè®¿é—®ã€‚

### 2. è®¤è¯å¤±è´¥

æ£€æŸ¥ token æ˜¯å¦æ­£ç¡®è®¾ç½®ï¼Œç¡®ä¿è¯·æ±‚å¤´åŒ…å« `Authorization: Bearer <token>`ã€‚

### 3. æƒé™ä¸è¶³

æŸäº›åŠŸèƒ½éœ€è¦ç‰¹å®šæƒé™ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·è§’è‰²å’Œæƒé™é…ç½®ã€‚

### 4. è®¢é˜…è¿‡æœŸ

ç”¨æˆ·è®¢é˜…è¿‡æœŸæ—¶ä¼šè‡ªåŠ¨è·³è½¬åˆ°è®¢é˜…é¡µé¢ï¼Œéœ€è¦ç»­è´¹åæ‰èƒ½ç»§ç»­ä½¿ç”¨ã€‚

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»º Pull Request

## è®¸å¯è¯

MIT License
